# lunar_catalog
Codes for using the Nakamura lunar event catalog

## Data sources in the repository
The catalog itself is in the subdirectory `UTIGTR_0018`. This is simply the unzipped version of the zipfile of the long period event catalog available as a [technical report from the University of Texas Institute of Geophysics](https://repositories.lib.utexas.edu/items/3c162b9a-ce04-4900-8f6e-63147eb7d4db). Details are available through that link and in the file `UTIGTR_0018/UTIGTR_0018.pdf`.

Full citation for the catalog is
> Nakamura, Y., Latham, G.V., Dorman, H.J., and Harris, J.E. "Passive Seismic Experiment, Long Period Event Catalog, Final Version (1969 Day 202 - 1977 Day 273, ALSEP Stations 11, 12, 13, 14, 15, and 16)." University of Texas Institute for Geophysics Technical Report No. 18 (originally published 19 June 1981, revised 2 October 2008), 2p plus appendices.

The repository also contains deep moonquake nest locations directly copied and pasted from [Nakamura (2005, Tables 2 and 3)](https://doi.org/10.1029/2004JE002332) in the csv file `Nakamura2005Locs_cp.csv`. The full citation for those locations are
> Nakamura, Y. (2005), Farside deep moonquakes and deep interior of the Moon, J. Geophys. Res., 110, E01001, doi:10.1029/2004JE002332.

Finally, the repository also includes coordinates of the Apollo lander elements in `LanderLocs.csv`. These are sourced from the [NASA Space Science Data Coordinated Archive (NSSDCA)](https://nssdc.gsfc.nasa.gov/planetary/lunar/lunar_sites.html). Currently, the codes only uses the ALSEP locations from Apollos 12, 14, 15, and 16.

## Codes in the repository
The code `read_catalog.py` reads the original fixed width format catalog file (`UTIGTR_0018/levent.1008.dat`) and outputs it into a csv file (`levent.csv`) for easier use in other python processing. It also reads the copy and pasted location file, `Nakamura2005Locs_cp.csv` and strips out some formatting to put it in an easier format as `Nakamura2005Locs.csv`.

The code `distance_calc.py` is just a simple code to calculate geodetic and great-circle distances (via the geopy package) between a deep moonquake (DMQ) nest and a specific Apollo ALSEP station and output it to the screen. The output is not used in other codes at this time. 

The code `process_events.py` loops through events in the catalog and selects out all events with an associated updated DMQ nest identifier and amplitudes recorded at more than one Apollo site. First it calculates geodetic epicentral distance to each Apollo station for all of these events and outputs a new csv file (`AmpDistance.csv`) that lists epicentral distance and amplitude for each station. If ifNormalize is set to True, it instead produces `AmpDistanceNorm.csv` which normalizes each amplitude by the mean amplitude for the station to account for site effects on amplitude. It then calculates all possible amplitude ratios between stations and plots them on a log-linear plot vs. the difference in epicentral distance between the stations. Assuming a simple exponential decay of amplitude with distance ($A = A_0 {\rm e}^{cx}$), amplitude ratios should cancel out the $A_0$ term, and depend on the difference in source-receiver distance between the stations: $A_1/A_2 = {\rm e}^{c(x_1-x_2)}$, where $A_1$ and $A_2$ are the amplitudes recorded at stations 1 and 2, and $x_1$ and $x_2$ are the source-receiver distances to stations 1 and 2, respectively, and thus should plot as a straight line in a log-linear plot  comparing amplitude ratios and distance differences. The code plots this and the best-fit log-linear fit passing through 1 at a distance difference of 0, as well as outputting the slope of the best fit line to the screen. It outputs the plot to a png file (`Ampratio.png` or `AmpratioNorm.png`), depending on whether ifNormalize is set to False or True). Finally it repeats all these calculations using the straight line Euclidean distance from the DMQ hypocenter to the stations instead of the geodetic epicentral distance. It only computes this if an event depth is specified for the DMQ nest in the Nakamura (2005) tables (which removes a little less than 1/3 of the located nests), and produces the smae files as before but with `Euclid` added to the naming convention.

The code `detectreduce.py` calculates the expected reduction in number of event detections for events at the poles relative to more equatorial events within the Apollo network. It works by assuming a Gutenberg-Richter power law relationship between number of events and seismic moment and assuming amplitude reduction due to increased distance results in a corresponding change in the minimum seismic moment detectable by the network linearly related with the amplitude change due to distance. The code requires you to input a slope for the exponential amplitude decay and a Gutenberg-Richter b-value.
